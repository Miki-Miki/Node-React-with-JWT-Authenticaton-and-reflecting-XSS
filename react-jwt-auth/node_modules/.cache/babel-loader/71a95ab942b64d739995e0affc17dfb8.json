{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Miki\\\\Desktop\\\\Node-React-JWT-Authentication-with-reflected-XSS-main\\\\react-frontend-jwt\\\\react-jwt-auth\\\\src\\\\components\\\\profile.component.js\";\nimport React, { Component } from \"react\";\nimport AuthService from \"../services/auth.service\";\nimport Form from 'react-validation/build/form';\nimport Input from 'react-validation/build/input'; // this component supplies content to the user's profile page\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Profile extends Component {\n  constructor(props) {\n    super(props);\n    this.handleInput = this.handleInput.bind(this);\n    this.onChangeNoXSSInput = this.onChangeNoXSSInput.bind(this);\n    this.onChangeReflectedXSSInput = this.onChangeReflectedXSSInput.bind(this);\n    this.handleXSSInput = this.handleXSSInput.bind(this);\n    this.state = {\n      currentUser: AuthService.getCurrentUser(),\n      noXSS: '',\n      reflectedXSS: '',\n      submitted: false\n    };\n  }\n\n  handleInput(e) {\n    // ...\n    console.log('form submit');\n  } // CRITICAL POINT\n  // passing user input through eval function to display alert\n  // if the input isn't javaScript code, an exception is thrown (message in console), \n  // and text is displayed on site and in the input field above;\n  // otherwise the eval function will run js code such as: alert(1)\n\n\n  handleXSSInput() {\n    const input = this.state.reflectedXSS.toString();\n\n    try {\n      eval(input);\n      this.setState({\n        noXSS: ''\n      });\n    } catch (err) {\n      this.setState({\n        noXSS: 'invalid xss input'\n      });\n      console.log('invalid xss input');\n    }\n  }\n\n  onChangeNoXSSInput(e) {\n    this.setState({\n      noXSS: e.target.value\n    });\n  }\n\n  onChangeReflectedXSSInput(e) {\n    this.setState({\n      reflectedXSS: e.target.value\n    });\n  }\n\n  render() {\n    const {\n      currentUser\n    } = this.state;\n\n    const xssPrep = /*#__PURE__*/_jsxDEV(\"b\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 25\n    }, this);\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"jumbotron\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: currentUser.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 19\n          }, this), \" Profile\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"(90s) Token:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 17\n        }, this), \" \", currentUser.accessToken.substring(0, 20), \" ...\", \" \", currentUser.accessToken.substr(currentUser.accessToken.length - 20)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Id:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 17\n        }, this), \" \", currentUser.id]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 17\n        }, this), \" \", currentUser.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Authorities:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: currentUser.roles && currentUser.roles.map((role, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: role\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 58\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-container\",\n        children: [/*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: this.handleInput,\n          ref: c => {\n            this.form = c;\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"no xss\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"text\",\n              className: \"form-control\",\n              name: \"noXSS\",\n              value: this.state.noXSS,\n              onChange: this.onChangeNoXSSInput\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"reflecting xss\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"text\",\n              className: \"form-control\",\n              name: \"reflectXSS\",\n              value: this.state.reflectedXSS,\n              onChange: this.onChangeReflectedXSSInput\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary btn-blcok\",\n            onClick: this.handleXSSInput,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Check XSS\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: this.state.noXSS\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Miki/Desktop/Node-React-JWT-Authentication-with-reflected-XSS-main/react-frontend-jwt/react-jwt-auth/src/components/profile.component.js"],"names":["React","Component","AuthService","Form","Input","Profile","constructor","props","handleInput","bind","onChangeNoXSSInput","onChangeReflectedXSSInput","handleXSSInput","state","currentUser","getCurrentUser","noXSS","reflectedXSS","submitted","e","console","log","input","toString","eval","setState","err","target","value","render","xssPrep","username","accessToken","substring","substr","length","id","email","roles","map","role","index","c","form"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,OAAOC,IAAP,MAAiB,6BAAjB;AACA,OAAOC,KAAP,MAAkB,8BAAlB,C,CAEA;;;AACA,eAAe,MAAMC,OAAN,SAAsBJ,SAAtB,CAAgC;AAC3CK,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKC,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBD,IAAxB,CAA6B,IAA7B,CAA1B;AACA,SAAKE,yBAAL,GAAiC,KAAKA,yBAAL,CAA+BF,IAA/B,CAAoC,IAApC,CAAjC;AACA,SAAKG,cAAL,GAAsB,KAAKA,cAAL,CAAoBH,IAApB,CAAyB,IAAzB,CAAtB;AAEA,SAAKI,KAAL,GAAa;AACTC,MAAAA,WAAW,EAAEZ,WAAW,CAACa,cAAZ,EADJ;AAETC,MAAAA,KAAK,EAAE,EAFE;AAGTC,MAAAA,YAAY,EAAE,EAHL;AAITC,MAAAA,SAAS,EAAE;AAJF,KAAb;AAMH;;AAEDV,EAAAA,WAAW,CAACW,CAAD,EAAI;AACb;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACD,GAnB0C,CAqB3C;AACA;AACA;AACA;AACA;;;AACAT,EAAAA,cAAc,GAAG;AACf,UAAMU,KAAK,GAAG,KAAKT,KAAL,CAAWI,YAAX,CAAwBM,QAAxB,EAAd;;AACA,QAAI;AACFC,MAAAA,IAAI,CAACF,KAAD,CAAJ;AACA,WAAKG,QAAL,CAAc;AACZT,QAAAA,KAAK,EAAE;AADK,OAAd;AAGD,KALD,CAKE,OAAMU,GAAN,EAAW;AACX,WAAKD,QAAL,CAAc;AACZT,QAAAA,KAAK,EAAE;AADK,OAAd;AAGAI,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACD;AACF;;AAEDX,EAAAA,kBAAkB,CAACS,CAAD,EAAI;AACpB,SAAKM,QAAL,CAAc;AACZT,MAAAA,KAAK,EAAEG,CAAC,CAACQ,MAAF,CAASC;AADJ,KAAd;AAGD;;AAEDjB,EAAAA,yBAAyB,CAACQ,CAAD,EAAI;AAC3B,SAAKM,QAAL,CAAc;AACZR,MAAAA,YAAY,EAAEE,CAAC,CAACQ,MAAF,CAASC;AADX,KAAd;AAGD;;AAEDC,EAAAA,MAAM,GAAG;AACL,UAAM;AAAEf,MAAAA;AAAF,QAAkB,KAAKD,KAA7B;;AACA,UAAMiB,OAAO,gBAAG;AAAA;AAAA;AAAA;AAAA,YAAhB;;AAEA,wBACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA,8BACE;AAAQ,QAAA,SAAS,EAAC,WAAlB;AAAA,+BACE;AAAA,kCACE;AAAA,sBAAShB,WAAW,CAACiB;AAArB;AAAA;AAAA;AAAA;AAAA,kBADF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAME;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EACgC,GADhC,EAEGjB,WAAW,CAACkB,WAAZ,CAAwBC,SAAxB,CAAkC,CAAlC,EAAqC,EAArC,CAFH,UAEiD,GAFjD,EAGGnB,WAAW,CAACkB,WAAZ,CAAwBE,MAAxB,CAA+BpB,WAAW,CAACkB,WAAZ,CAAwBG,MAAxB,GAAiC,EAAhE,CAHH;AAAA;AAAA;AAAA;AAAA;AAAA,cANF,eAWE;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EACuB,GADvB,EAEGrB,WAAW,CAACsB,EAFf;AAAA;AAAA;AAAA;AAAA;AAAA,cAXF,eAeE;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAC0B,GAD1B,EAEGtB,WAAW,CAACuB,KAFf;AAAA;AAAA;AAAA;AAAA;AAAA,cAfF,eAmBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAnBF,eAoBE;AAAA,kBACGvB,WAAW,CAACwB,KAAZ,IACCxB,WAAW,CAACwB,KAAZ,CAAkBC,GAAlB,CAAsB,CAACC,IAAD,EAAOC,KAAP,kBAAiB;AAAA,oBAAiBD;AAAjB,WAASC,KAAT;AAAA;AAAA;AAAA;AAAA,gBAAvC;AAFJ;AAAA;AAAA;AAAA;AAAA,cApBF,eAyBE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA,gCACE,QAAC,IAAD;AAAM,UAAA,QAAQ,EAAE,KAAKjC,WAArB;AAAkC,UAAA,GAAG,EAAEkC,CAAC,IAAI;AACxC,iBAAKC,IAAL,GAAYD,CAAZ;AACD,WAFH;AAAA,kCAGE;AAAK,YAAA,SAAS,EAAC,YAAf;AAAA,oCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE,QAAC,KAAD;AACE,cAAA,IAAI,EAAC,MADP;AAEE,cAAA,SAAS,EAAC,cAFZ;AAGE,cAAA,IAAI,EAAC,OAHP;AAIE,cAAA,KAAK,EAAE,KAAK7B,KAAL,CAAWG,KAJpB;AAKE,cAAA,QAAQ,EAAE,KAAKN;AALjB;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHF,eAaE;AAAK,YAAA,SAAS,EAAC,YAAf;AAAA,oCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE,QAAC,KAAD;AACE,cAAA,IAAI,EAAC,MADP;AAEE,cAAA,SAAS,EAAC,cAFZ;AAGE,cAAA,IAAI,EAAC,YAHP;AAIE,cAAA,KAAK,EAAE,KAAKG,KAAL,CAAWI,YAJpB;AAKE,cAAA,QAAQ,EAAE,KAAKN;AALjB;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAbF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAyBE;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA,iCACI;AAAQ,YAAA,SAAS,EAAC,2BAAlB;AAA8C,YAAA,OAAO,EAAE,KAAKC,cAA5D;AAAA,mCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBAzBF;AAAA;AAAA;AAAA;AAAA;AAAA,cAzBF,eAyDE;AAAA,kBAAK,KAAKC,KAAL,CAAWG;AAAhB;AAAA;AAAA;AAAA;AAAA,cAzDF;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AA6DH;;AAtH0C","sourcesContent":["import React, { Component } from \"react\"\nimport AuthService from \"../services/auth.service\"\nimport Form from 'react-validation/build/form'\nimport Input from 'react-validation/build/input'\n\n// this component supplies content to the user's profile page\nexport default class Profile extends Component {\n    constructor(props) {\n        super(props)\n        this.handleInput = this.handleInput.bind(this)\n        this.onChangeNoXSSInput = this.onChangeNoXSSInput.bind(this)\n        this.onChangeReflectedXSSInput = this.onChangeReflectedXSSInput.bind(this)\n        this.handleXSSInput = this.handleXSSInput.bind(this)\n\n        this.state = {\n            currentUser: AuthService.getCurrentUser(),\n            noXSS: '',\n            reflectedXSS: '',\n            submitted: false,\n        }\n    }    \n\n    handleInput(e) {\n      // ...\n      console.log('form submit')\n    }\n\n    // CRITICAL POINT\n    // passing user input through eval function to display alert\n    // if the input isn't javaScript code, an exception is thrown (message in console), \n    // and text is displayed on site and in the input field above;\n    // otherwise the eval function will run js code such as: alert(1)\n    handleXSSInput() {\n      const input = this.state.reflectedXSS.toString()\n      try {\n        eval(input)\n        this.setState({\n          noXSS: ''\n        })\n      } catch(err) {\n        this.setState({\n          noXSS: 'invalid xss input'\n        })\n        console.log('invalid xss input')\n      }\n    }\n\n    onChangeNoXSSInput(e) {\n      this.setState({\n        noXSS: e.target.value\n      })\n    }\n\n    onChangeReflectedXSSInput(e) {\n      this.setState({\n        reflectedXSS: e.target.value\n      })\n    }\n\n    render() {\n        const { currentUser } = this.state\n        const xssPrep = <b></b>\n\n        return (\n            <div className=\"container\">\n              <header className=\"jumbotron\">\n                <h3>\n                  <strong>{currentUser.username}</strong> Profile\n                </h3>\n              </header>\n              <p>\n                <strong>(90s) Token:</strong>{\" \"}\n                {currentUser.accessToken.substring(0, 20)} ...{\" \"}\n                {currentUser.accessToken.substr(currentUser.accessToken.length - 20)}\n              </p>\n              <p>\n                <strong>Id:</strong>{\" \"}\n                {currentUser.id}\n              </p>\n              <p>\n                <strong>Email:</strong>{\" \"}\n                {currentUser.email}\n              </p>\n              <strong>Authorities:</strong>\n              <ul>\n                {currentUser.roles &&\n                  currentUser.roles.map((role, index) => <li key={index}>{role}</li>)}\n              </ul>\n\n              <div className=\"form-container\">\n                <Form onSubmit={this.handleInput} ref={c => {\n                    this.form = c;\n                  }}>\n                  <div className=\"form-group\">\n                    <label>no xss</label>\n                    <Input \n                      type=\"text\"\n                      className=\"form-control\"\n                      name=\"noXSS\"\n                      value={this.state.noXSS}\n                      onChange={this.onChangeNoXSSInput}\n                      />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>reflecting xss</label>\n                    <Input \n                      type=\"text\"\n                      className=\"form-control\"\n                      name=\"reflectXSS\"\n                      value={this.state.reflectedXSS}\n                      onChange={this.onChangeReflectedXSSInput}\n                      />\n                  </div>\n                </Form>  \n                <div className=\"form-group\">\n                    <button className=\"btn btn-primary btn-blcok\" onClick={this.handleXSSInput}>\n                      <span>Check XSS</span>\n                    </button>   \n                </div>                         \n              </div>\n\n              <h2>{this.state.noXSS}</h2>         \n            </div>\n          )\n    }\n}"]},"metadata":{},"sourceType":"module"}
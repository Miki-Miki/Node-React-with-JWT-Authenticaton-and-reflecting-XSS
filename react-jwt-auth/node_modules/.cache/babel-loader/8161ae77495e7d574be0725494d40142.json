{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Miki\\\\Desktop\\\\Node-React-JWT-Authentication-with-reflected-XSS-main\\\\react-frontend-jwt\\\\react-jwt-auth\\\\src\\\\components\\\\login.component.js\";\nimport React, { Component } from 'react';\nimport Form from 'react-validation/build/form';\nimport Input from 'react-validation/build/input';\nimport CheckButton from 'react-validation/build/button';\nimport AuthService from '../services/auth.service'; // required field validation setup\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst required = value => {\n  if (!value) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      role: \"alert\",\n      children: \"this field is required.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 13\n    }, this);\n  }\n}; // the Login component handles user login\n\n\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.handleLogin = this.handleLogin.bind(this);\n    this.onChangeUsername = this.onChangeUsername.bind(this);\n    this.onChangePassword = this.onChangePassword.bind(this);\n    this.state = {\n      username: '',\n      password: '',\n      loading: false,\n      message: ''\n    };\n  }\n\n  onChangeUsername(e) {\n    this.setState({\n      username: e.target.value\n    });\n  }\n\n  onChangePassword(e) {\n    this.setState({\n      password: e.target.value\n    });\n  }\n\n  handleLogin(e) {\n    e.preventDefault();\n    this.setState({\n      message: '',\n      loading: true\n    });\n    this.form.validateAll();\n\n    if (this.checkBtn.context._errors.length === 0) {\n      AuthService.login(this.state.username, this.state.password) // calling /api/auth/signin\n      .then(() => {\n        this.props.history.push('/profile');\n        window.location.reload();\n      }, error => {\n        const resMessage = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n        this.setState({\n          loading: false,\n          message: resMessage\n        });\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-12\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card card-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\",\n          alt: \"profile-img\",\n          className: \"profile-img-card\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: this.handleLogin,\n          ref: c => {\n            this.form = c;\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"username\",\n              children: \"Username\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"text\",\n              className: \"form-control\",\n              name: \"username\",\n              value: this.state.username,\n              onChange: this.onChangeUsername,\n              validations: [required]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"password\",\n              children: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"password\",\n              className: \"form-control\",\n              name: \"password\",\n              value: this.state.password,\n              onChange: this.onChangePassword,\n              validations: [required]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary btn-block\",\n              disabled: this.state.loading,\n              children: [this.state.loading && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"spinner-border spinner-border-sm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 19\n          }, this), this.state.message && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"alert alert-danger\",\n              role: \"alert\",\n              children: this.state.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(CheckButton, {\n            style: {\n              display: \"none\"\n            },\n            ref: c => {\n              this.checkBtn = c;\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Miki/Desktop/Node-React-JWT-Authentication-with-reflected-XSS-main/react-frontend-jwt/react-jwt-auth/src/components/login.component.js"],"names":["React","Component","Form","Input","CheckButton","AuthService","required","value","Login","constructor","props","handleLogin","bind","onChangeUsername","onChangePassword","state","username","password","loading","message","e","setState","target","preventDefault","form","validateAll","checkBtn","context","_errors","length","login","then","history","push","window","location","reload","error","resMessage","response","data","toString","render","c","display"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport Form from 'react-validation/build/form'\nimport Input from 'react-validation/build/input'\nimport CheckButton from 'react-validation/build/button'\n\nimport AuthService from '../services/auth.service'\n\n// required field validation setup\nconst required = value => {\n    if(!value) {\n        return (\n            <div className=\"alert alert-danger\" role=\"alert\">\n                this field is required.\n            </div>\n        )\n    }\n}\n\n// the Login component handles user login\nexport default class Login extends Component {\n    constructor(props) {\n        super(props)\n        this.handleLogin = this.handleLogin.bind(this)\n        this.onChangeUsername = this.onChangeUsername.bind(this)\n        this.onChangePassword = this.onChangePassword.bind(this)\n\n        this.state = {\n            username: '',\n            password: '',\n            loading: false,\n            message: ''\n        }\n    }\n\n    onChangeUsername(e) {\n        this.setState({\n            username: e.target.value\n        })\n    }\n\n    onChangePassword(e) {\n        this.setState({\n            password: e.target.value\n        })\n    }\n\n    handleLogin(e) {\n        e.preventDefault()\n\n        this.setState({\n            message: '',\n            loading: true\n        })\n\n        this.form.validateAll()\n\n        if(this.checkBtn.context._errors.length === 0) {\n            AuthService.login(this.state.username, this.state.password) // calling /api/auth/signin\n                .then(() => {\n                    this.props.history.push('/profile')\n                    window.location.reload()\n                },\n                error => {\n                    const resMessage = (\n                        error.response &&\n                        error.response.data &&\n                        error.response.data.message\n                    ) \n                    || error.message || error.toString()\n\n                    this.setState({\n                        loading: false,\n                        message: resMessage\n                    })\n                }\n                )\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"col-md-12\">\n              <div className=\"card card-container\">\n                <img\n                  src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\n                  alt=\"profile-img\"\n                  className=\"profile-img-card\"\n                />\n      \n                <Form\n                  onSubmit={this.handleLogin}\n                  ref={c => {\n                    this.form = c;\n                  }}\n                >\n                  <div className=\"form-group\">\n                    <label htmlFor=\"username\">Username</label>\n                    <Input\n                      type=\"text\"\n                      className=\"form-control\"\n                      name=\"username\"\n                      value={this.state.username}\n                      onChange={this.onChangeUsername}\n                      validations={[required]}\n                    />\n                  </div>\n      \n                  <div className=\"form-group\">\n                    <label htmlFor=\"password\">Password</label>\n                    <Input\n                      type=\"password\"\n                      className=\"form-control\"\n                      name=\"password\"\n                      value={this.state.password}\n                      onChange={this.onChangePassword}\n                      validations={[required]}\n                    />\n                  </div>\n      \n                  <div className=\"form-group\">\n                    <button\n                      className=\"btn btn-primary btn-block\"\n                      disabled={this.state.loading}\n                    >\n                      {/* if state is loading display spinner */}\n                      {this.state.loading && (\n                        <span className=\"spinner-border spinner-border-sm\"></span>\n                      )}\n                      <span>Login</span>\n                    </button>\n                  </div>\n      \n                  {this.state.message && (\n                    <div className=\"form-group\">\n                      <div className=\"alert alert-danger\" role=\"alert\">\n                        {this.state.message}\n                      </div>\n                    </div>\n                  )}\n                  <CheckButton\n                    style={{ display: \"none\" }}\n                    ref={c => {\n                      this.checkBtn = c;\n                    }}\n                  />\n                </Form>\n              </div>\n            </div>\n          )\n    }\n}"]},"metadata":{},"sourceType":"module"}